---
layout: post
title: Ubuntu updates visualization.
date: '2012-05-06T07:55:00.000-07:00'
author: Stephen Nancekivell
tags: 
modified_time: '2012-05-06T07:55:01.805-07:00'
thumbnail: http://3.bp.blogspot.com/-2sewPQya7Wo/T6aMO3zvhvI/AAAAAAAAAXk/X5fnTKU8pRo/s72-c/Ubuntu+updates+-+weekly+average.png
blogger_id: tag:blogger.com,1999:blog-2519344180739427574.post-4428361406586985840
blogger_orig_url: http://blog.stephenn.com/2012/05/ubuntu-updates-visualization.html
---

I was wondering if there would be lots of updates to Ubuntu leading up to the release of 11/4 and thought I could data mine this to find out. So I made a visualization to see if that was the case, turns out the opposite is true. There has been a distinct lack of updates in the last couple of months. At least in the main repository.<br /><br /><h3>Heres the visualization I made.</h3><div class="separator" style="clear: both; text-align: center;"><a href="/assets/2012-05-06-ubuntu-updates-visualization-Ubuntu+updates+-+weekly+average.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="245" src="/assets/2012-05-06-ubuntu-updates-visualization-Ubuntu+updates+-+weekly+average.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: left;"><a href="https://docs.google.com/spreadsheet/pub?key=0Ar0JB_woDdlodGMzTk45R3VaXzdnTXY1WTJxMUF2d3c&amp;output=html">Click here for interactive chart.</a></div>To do this I searched the changelogs for all packages from changelogs.ubuntu.com for the time stamps. Then I took the average of each week in the month to smooth it.<br /><br /><h3>Heres how I did it.</h3><br /><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">#First download the changelogs.ubuntu website, only use the main pool.&nbsp;</span></blockquote><blockquote class="tr_bq"><b id="internal-source-marker_0.814449043944478"><span style="font-weight: normal; vertical-align: baseline; white-space: pre-wrap;"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">wget -m -np -r http://changelogs.ubuntu.com/changelogs/pool/main/</span></span></b></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp;#Search for all time stamps and print them out.</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;"><b id="internal-source-marker_0.814449043944478"><span style="font-weight: normal; vertical-align: baseline; white-space: pre-wrap;">egrep -o -r -e "[A-Z][a-z]{2}, [0-9]{0,2} [A-Z][a-z]{2} [0-9]{4}"</span></b>&nbsp; &gt; dates.main</span></blockquote><br />I then wrote &nbsp;a python script to count how many dates were in each week and average that over the month.<br /><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">#!/usr/bin/env python</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">import sys,time</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">dates_in = {}</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">for line in sys.stdin.readlines():</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; line = line.rstrip()</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; if line in dates_in:</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; &nbsp; &nbsp; dates_in[line] = dates_in[line]+1</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; else:</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; &nbsp; &nbsp; dates_in[line] = 1</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">month_counts = {}</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">for dateS,count in dates_in.items():</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; date =time.strptime(dateS, "%d %b %Y")</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; month_date = "%d/01/%d" % (date.tm_mon,date.tm_year)</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; if month_date in month_counts:</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; &nbsp; &nbsp; month_counts[month_date] = month_counts[month_date] + [count]</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; else:</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; &nbsp; &nbsp; month_counts[month_date] = [count]</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">for dateS,count in month_counts.items():</span></blockquote><blockquote class="tr_bq"><span style="font-family: 'Courier New', Courier, monospace; font-size: x-small;">&nbsp; &nbsp; print dateS+","+str(sum(count)/len(count))</span></blockquote><br /><br />Run that on the downloaded changelogs.<br /><blockquote class="tr_bq"><span style="font-size: x-small;"><span style="font-family: 'Courier New', Courier, monospace;">python data.py &lt; dump/dates.main &gt; weekly.avg.pr.month.csv</span>&nbsp;</span></blockquote><span style="font-size: x-small;">&nbsp;Then I imported that csv into google docs to make the graph.</span>