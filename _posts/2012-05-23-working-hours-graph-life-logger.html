---
layout: post
title: Working Hours Graph - Life Logger
date: '2012-05-23T03:38:00.002-07:00'
author: Stephen Nancekivell
tags: 
modified_time: '2012-09-22T06:09:29.446-07:00'
thumbnail: https://lh5.googleusercontent.com/AxDjgy517-cWy50TreoaQbFujvNhyTOjMQahDAsL11MKbsOcig3yY_lUOj2xPmH1CJMsYngw6jOKI8IgrgueNva4VAGyCCHDZJfH_FfDOtg10efRR24=s72-c
blogger_id: tag:blogger.com,1999:blog-2519344180739427574.post-5122150572765129593
blogger_orig_url: http://blog.stephenn.com/2012/05/working-hours-graph-life-logger.html
---

<br /><br />I’ve been using <a href="https://play.google.com/store/apps/details?id=com.funanduseful.lifelogger">Life Logger</a> to track how long I spend at work. It has a pretty rudimentary way to get summaries from it. I wanted to see a graph of how long I’ve spent at work in a graph so I exported the database and made my own.<br /><br />Here’s what I Came Up With.<img src="https://lh5.googleusercontent.com/AxDjgy517-cWy50TreoaQbFujvNhyTOjMQahDAsL11MKbsOcig3yY_lUOj2xPmH1CJMsYngw6jOKI8IgrgueNva4VAGyCCHDZJfH_FfDOtg10efRR24" /><br /><br />If my boss sees this, its all those public holidays that bring those hours down.<br /><br /><br />Here’s how I did it. I exported the database from the app. I love how on android I can send it to drop box and pick it up on my computer.<br /><br />Its a sqlite database, which I can easily manipulate using the sqlite tools on my computer.<br /><br />The Timestamps are stored as milliseconds from the unix epoch rather than a normal sql date. The developer is must be using the java <code class="prettyprint lang-java">system.currenttimemillis()</code>.<br /><br />The table Im interested in is this one.<br /><pre class="prettyprint lang-sql"><br />CREATE TABLE tbl_log (_id INTEGER PRIMARY KEY AUTOINCREMENT,time_card_id_ref INTEGER NOT NULL, start_time INTEGER DEFAULT 0, end_time INTEGER DEFAULT 0, estimation INTEGER DEFAULT 0, note TEXT );</pre>Dates can be pulled out with the sql query.<br /><br /><pre class="prettyprint lang-sql"><br />strftime("%Y-%M-%d",start_time/1000, "unixepoch") from tbl_log;<br /></pre><br />I can get the weeks of each entry with this entry. This gives year-week like 2012-2, which is good to group by.<br /><br /><pre class="prettyprint lang-sql"><br />select strftime("%Y-%W", start_time/1000, "unixepoch") from tbl_log;<br /></pre><br />I can get the hours worked in a week by using the sum function over a set like this.<br /><pre class="prettyprint lang-sql"><br />select sum(end_time-start_time)/1000/60/60  from tbl_log where strftime("%Y-%W", start_time/1000, "unixepoch") = "2012-16";<br /></pre><br />This can be done for all weeks like this. The sum is an aggregate function which runs on the rows that are grouped by.<br /><br /><pre class="prettyprint lang-sql"><br />select strftime("%m/%d/%Y", start_time/1000, "unixepoch"), sum(end_time-start_time)/1000/60/60 as hours_worked from tbl_log group by strftime("%Y-%W", start_time/1000, "unixepoch");<br /></pre><br />which gives the times like this which can be imported into a spreadsheet and charted.<br /><pre class="prettyprint"><br />11/20/2011|34<br />11/27/2011|35<br /></pre>